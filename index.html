// refactor to use promise
<html>
    <head></head>
    <body>
        <button>Click!</button>
        <script>
          function startGame(){
            let counter = 0;
            
            document.querySelector('button').addEventListener('click', () => {
              ++counter
            });
            
            return new Promise((resolve, reject) => {
              setTimeout(() => {
                if (counter > 5) {
                    resolve();
                } else {
                    reject();
                }
              }, 2000)
              
            });
          }
          
          startGame()
            .then(() => alert('You win!')) // callback function if resolve() is called
            .catch(() => alert('You lost!')) // callback function if reject() is called
        </script>
    </body>
</html>

<!-- // initial refactor to encapsulate logic
<html>
    <head></head>
    <body>
        <button>Click!</button>
        <script>
          function startGame(){
            let counter = 0;
            
            document.querySelector('button').addEventListener('click', () => {
              ++counter
            });
    
            setTimeout(() => {
              if (counter > 5) {
                alert('You won! Your clicks: ' + counter);
              } else {
                alert('Sorry, you lost');
              }
            }, 2000)
          }
          
          startGame();
        </script>
    </body>
</html>-->

<!-- // vanilla javascript
<html>
    <head></head>
    <body>
        <button>Click!</button>
        <script>
          let counter = 0;
          document.querySelector('button').addEventListener('click', () => {
            ++counter
          });
          
          setTimeout(() => {
            if (counter > 5){
              alert('You won! Your clicks: ' + counter);
            } else {
              alert('Sorry, you lost');
            }
          }, 2000)
        </script>
    </body>
</html>-->

